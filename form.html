<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="style.css">

</head>
<body>
    <div class="container">
        <h2 class="text-success text-center">Form Details</h2>
        <div class="col-lg-8 m-auto d-block">

            <form action="#" method="post" onsubmit="return validation">
                <div class="form-control">
                <label>First Name:</label>
                        <input type="text" id="fname" name="fname" placeholder="Enter your First Name" minlength="3" maxlength="15" required>
                        <i class="fas fa-check-circle"></i>
                        <i class="fas fa-exclamation-circle"></i>
                        <small>Error</small>
                        
                        </div>
                        <div class="form-control">
                        <label>Last Name:</label>
                        <input type="text" id="lname" name="lname" placeholder="Enter your Last Name" minlength="3" maxlength="15" required>
                        <i class="fas fa-check-circle"></i>
                        <i class="fas fa-exclamation-circle"></i>
                        <small>Error</small>

                        
                        </div>
                        <div class="form-control">
                        <label>Email Id:</label>
                        <input type="text" id="email" name="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2, 4}$" placeholder="Enter Your Email Id" required>
                        <i class="fas fa-check-circle"></i>
                        <i class="fas fa-exclamation-circle"></i>
                        <small>Error</small>
                        </div>

                        <div class="form-control">
                        <label for="field">Password:</label>
                        <input type="password" id="password" name="password" maxlength="8" name="password" pattern="^[A-Za-z]+[0-9]$" placeholder="Enter Your Password" required>
                        <i class="fas fa-check-circle"></i>
                        <i class="fas fa-exclamation-circle"></i>
                        <small>Error</small>

                        </div>
                        <div class="form-control">

                        <label for="field">Confirm Password:</label>
                        <input type="password" id="conpassword" name="conpassword" placeholder="Confirm Password" required>
                        <i class="fas fa-check-circle"></i>
                        <i class="fas fa-exclamation-circle"></i>
                        <small>Error</small>

                        </div>
                        <button type="submit">SUBMIT</button>
                        <br><br>
                    
                        
                        </div>
                        </div>
                        
                        
                    </form>
                

                
                    <script type="text/javascript">
                        const form = document.getElementById('form');
                        const fname = document.getElementById('fname');
                        const lname = document.getElementById('lname');
                        const email = document.getElementById('email');
                        const password = document.getElementById('password');
                        const conpassword = document.getElementById('conpassword');

                        form.addEventListener('submit', e => {
                            e.preventDefault();

                            checkInputs();
                        });

                        function checkInputs() {
                            // trim to remove whitespaces
                            const fnameValue = fname.value.trim();
                            const lnameValue = lname.value.trim();
                            const emailValue = email.value.trim();
                            const passwordValue = password.value.trim();
                            const conpasswordValue = conpassword.value.trim();
                            

                            if(fnameValue === '') {
                                setErrorFor(fname, 'First Name cannot be empty');
                            }
                            else {
                                setSuccessFor(fname);
                            }
                            if(lnameValue === '') {
                                setErrorFor(lname, 'Last Name cannot be empty');
                            }
                            else {
                                setSuccessFor(lname);
                            }
                            if(emailValue === '') {
                                setErrorFor(email, 'Email cannot blank');

                            }
                            else if(!isEmail(emailValue)) {
                                setErrorFor(email, 'Not a valid email');
                            }
                            else{
                                setSuccessFor(email);
                            }
                            if(passwordValue === '') {
                                setErrorFor(password, 'Password cannot be empty');
                            }
                            else {
                                setSuccessFor(password);
                            }
                            if(conpasswordValue === '') {
                                setErrorFor(conpassword, 'Cannot be empty');
                            }
                            else if(passwordValue !== conpasswordValue) {
                                setError(conpassword, 'Passwords does not match');
                            }
                            else {
                                setSuccessFor(conpassword);
                            }
                        }

                        function setErrorFor(input, message) {
                            const formControl = input.parentElement;
                            const small = formControl.querySelector('small');
                            formControl.className = 'form-control error';
                            small.innerText = message; 
                        }
                        function setSuccessFor(input) {
                            const formControl = input.parentElement;
                            formControl.className = 'form-control success';
                        }

                       </script>
                
        
    
</body>
</html>